<!--[*]
[script]brick_loginform.php[/script]

[mcss=user]loginform.css[/mcss]

[*]-->
<div id="{v#id}form" class="user-login-form">
    <div class="panel">
        <div id="{v#id}loginpanel" class="panel-collapse collapse in">
            <form id="{v#id}loginform" role="form" action="/user/login/" method="post">
                <h3>Авторизация</h3>

                <div class="form-group">
                    <label for="{v#id}in-username" class="control-label">Имя пользователя или email</label>
                    <input id="{v#id}in-username" type="text"
                           name="username" class="form-control field-required"
                           placeholder="Имя пользователя или email">
                </div>
                <div class="form-group">
                    <label for="{v#id}in-pass" class="control-label">Пароль</label>
                    <input id="{v#id}in-pass" type="password"
                           name="password" class="form-control field-required"
                           placeholder="Пароль">
                </div>
                <div class="form-group">
                    <div class="checkbox">
                        <label> <input type="checkbox" name="autologin"
                                       data-form="autologin"> Запомнить меня </label>
                    </div>
                </div>
                <div class="form-group">
                    <button type="submit" class="btn btn-primary" data-wait="disable">Войти</button>
                    &nbsp;&nbsp;&nbsp;
                    <a data-parent="#{v#id}form" href="#{v#id}passrec"
                       data-toggle="collapse" data-wait="disable">Вспомнить пароль</a>
                    <img src="{C#ASSETS:R}/images/loading.gif" style="display: none" data-wait="show"/>
                </div>

                <div class="form-group">
                    <a data-parent="#{v#id}form" href="#{v#id}regpanel"
                       data-toggle="collapse">Новый пользователь? Регистрация...</a>
                </div>
            </form>
        </div>

        <div id="{v#id}regpanel" class="panel-collapse collapse">
            <form id="{v#id}regform" role="form" action="/user/register/" method="post">
                <h3>Регистрация</h3>

                <div class="form-group">
                    <label for="{v#id}reg-login" class="control-label">Имя пользователя</label>
                    <input id="{v#id}reg-login" type="text"
                           class="form-control field-required" name="username"
                           placeholder="Имя пользователя">
                </div>
                <div class="form-group">
                    <label for="{v#id}reg-email" class="control-label">Email</label>
                    <input id="{v#id}reg-email" type="email"
                           class="form-control field-required" name="email"
                           placeholder="Email">
                </div>
                <div class="form-group">
                    <label for="{v#id}reg-pass" class="control-label">Пароль</label>
                    <input id="{v#id}reg-pass" type="password"
                           class="form-control field-required"
                           name="password"
                           placeholder="Пароль">
                </div>
                <div class="form-group">
                    <label for="{v#id}reg-passconf" class="control-label">Подвердите пароль</label>
                    <input id="{v#id}reg-passconf" type="password"
                           class="form-control field-required"
                           name="passwordconfirm"
                           placeholder="Подвердите пароль">
                </div>
                <div class="form-group">
                    <div class="checkbox">
                        <label> <input type="checkbox" name="termsofuse" data-form="termsofuse"/> Я согласен с
                            <a href="/user/termsofuse/" data-click="termofuse">пользовательским соглашением</a></label>
                    </div>
                </div>
                <div class="form-group text-right">
                    <button type="submit" class="btn btn-primary">
                        Зарегистрироваться
                    </button>
                    <button type="button" class="btn btn-default"
                            data-parent="#{v#id}form"
                            data-target="#{v#id}loginpanel"
                            data-toggle="collapse">Отмена
                    </button>
                </div>
            </form>
        </div>

        <div id="{v#id}passrec" class="panel-collapse collapse">
            <form id="{v#id}passrecform" role="form" action="/user/passrec/" method="post">
                <h3>Восстановление&nbsp;доступа</h3>

                <p>
                    Чтобы восстановить пароль, укажите e-mail, который Вы
                    использовали при регистрации.
                </p>

                <div class="form-group">
                    <input class="form-control" name="email" placeholder="Введите e-mail">
                </div>
                <div class="form-group">
                    <button type="submit" class="btn btn-primary">Восстановить</button>
                    <button type="button" class="btn btn-default"
                            data-parent="#{v#id}form"
                            data-target="#{v#id}loginpanel"
                            data-toggle="collapse">Отмена
                    </button>
                </div>
            </form>
        </div>

    </div>
</div>

<script>
    Brick.use('user', 'guest', function(err, NS){
        (new NS.AuthFormWidget({'boundingBox': '#{v#id}loginform'})).render();
        (new NS.RegisterFormWidget({'boundingBox': '#{v#id}regform'})).render();
        (new NS.PasswordRecoveryFormWidget({'boundingBox': '#{v#id}passrecform'})).render();
    });
</script>
