<!--[*]
[script]brick/loginform.php[/script]

[mcss=user]loginform.css[/mcss]

[*]-->
<div id="{v#id}form" class="user-login-form">
    <div class="panel">
        <div id="{v#id}loginpanel" class="panel-collapse collapse in">
            <form id="{v#id}loginform" role="form" action="/user/login/" method="post">
                <h3>{#brick.loginform.login.title}</h3>

                <div class="form-group">
                    <label for="{v#id}in-username" class="control-label">{#brick.loginform.login.username.label}</label>
                    <input id="{v#id}in-username" type="text"
                           name="username" class="form-control field-required"
                           placeholder="{#brick.loginform.login.username.holder}">
                </div>
                <div class="form-group">
                    <label for="{v#id}in-pass" class="control-label">{#brick.loginform.login.password.label}</label>
                    <input id="{v#id}in-pass" type="password"
                           name="password" class="form-control field-required"
                           placeholder="{#brick.loginform.login.password.holder}">
                </div>
                <div class="form-group">
                    <div class="checkbox">
                        <label> <input type="checkbox" name="autologin" checked="checked"
                                       data-form="autologin"> {#brick.loginform.login.autologin} </label>
                    </div>
                </div>
                <div class="form-group">
                    <button type="submit" class="btn btn-primary" data-wait="disable">
                        {#brick.loginform.login.action.submit}
                    </button>
                    &nbsp;&nbsp;&nbsp;
                    <a data-parent="#{v#id}form" href="#{v#id}passrec"
                       data-toggle="collapse" data-wait="disable">{#brick.loginform.login.action.passrec}</a>
                    <img src="/images/loading.gif" data-wait="show"/>
                </div>

                <div class="form-group">
                    <a data-parent="#{v#id}form" href="#{v#id}regpanel"
                       data-toggle="collapse">
                        {#brick.loginform.login.action.register}
                    </a>
                </div>
            </form>
        </div>

        <div id="{v#id}regpanel" class="panel-collapse collapse">
            <form id="{v#id}regform" role="form" action="/user/register/" method="post">
                <h3>{#brick.loginform.register.title}</h3>

                <div class="form-group">
                    <label for="{v#id}reg-login" class="control-label">{#brick.loginform.register.login.label}</label>
                    <input id="{v#id}reg-login" type="text"
                           class="form-control field-required" name="username"
                           placeholder="{#brick.loginform.register.login.holder}">
                </div>
                <div class="form-group">
                    <label for="{v#id}reg-email" class="control-label">{#brick.loginform.register.email.label}</label>
                    <input id="{v#id}reg-email" type="email"
                           class="form-control field-required" name="email"
                           placeholder="{#brick.loginform.register.email.label}">
                </div>
                <div class="form-group">
                    <label for="{v#id}reg-pass" class="control-label">{#brick.loginform.register.password.label}</label>
                    <input id="{v#id}reg-pass" type="password"
                           class="form-control field-required"
                           name="password"
                           placeholder="{#brick.loginform.register.password.holder}">
                </div>
                <div class="form-group">
                    <label for="{v#id}reg-passconf" class="control-label">{#brick.loginform.register.confirm.label}</label>
                    <input id="{v#id}reg-passconf" type="password"
                           class="form-control field-required"
                           name="passwordconfirm"
                           placeholder="{#brick.loginform.register.confirm.holder}">
                </div>
                <div class="form-group">
                    <div class="checkbox">
                        <label> <input type="checkbox" name="termsofuse" data-form="termsofuse"/> {#brick.loginform.register.termsofuse.iagree}
                            <a href="/user/termsofuse/" data-click="termofuse">{#brick.loginform.register.termsofuse.title}</a></label>
                    </div>
                </div>
                <div class="form-group text-right">
                    <button type="submit" class="btn btn-primary">
                        {#brick.loginform.register.action.submit}
                    </button>
                    <button type="button" class="btn btn-default"
                            data-parent="#{v#id}form"
                            data-target="#{v#id}loginpanel"
                            data-toggle="collapse">{#brick.loginform.register.action.cancel}
                    </button>
                </div>
            </form>
        </div>

        <div id="{v#id}passrec" class="panel-collapse collapse">
            <form id="{v#id}passrecform" role="form" action="/user/passrec/" method="post">
                <h3>
                    {#brick.loginform.passrec.title}
                </h3>

                <p>
                    {#brick.loginform.passrec.descript}
                </p>

                <div class="form-group">
                    <input class="form-control" name="email" placeholder="{#brick.loginform.passrec.email.holder}">
                </div>
                <div class="form-group">
                    <button type="submit" class="btn btn-primary">
                        {#brick.loginform.passrec.action.submit}
                    </button>
                    <button type="button" class="btn btn-default"
                            data-parent="#{v#id}form"
                            data-target="#{v#id}loginpanel"
                            data-toggle="collapse">
                        {#brick.loginform.passrec.action.cancel}
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
    Brick.use('user', 'guest', function(err, NS){
        (new NS.LoginFormWidget({'boundingBox': '#{v#id}loginform'})).render();
        (new NS.RegisterFormWidget({'boundingBox': '#{v#id}regform'})).render();
        (new NS.PasswordRecoveryFormWidget({'boundingBox': '#{v#id}passrecform'})).render();
    });
</script>
