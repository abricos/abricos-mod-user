<!--[*]

[script]brick_usermenubutton.php[/script]

[bkvar=guest]

    <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Вход <b class="caret"></b></a>
        <div class="dropdown-menu">
            {v#loginform}
        </div>
    </li>

[/bkvar]

[bkvar=user]


<li class="dropdown" id="userform-{v#id}">
    <a href="/bos/#app=uprofile/ws/showws/" title="{v#username}"
       class="dropdown-toggle" data-hover="dropdown">
        <i class="fa fa-user"></i>
        {v#username} <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
        <li>
            <a href="/bos/#app=uprofile/ws/showws/" title="{v#username}">
                Профиль пользователя
            </a>
        </li>
        <li class="divider"></li>
        <li>
            <div id="appbosuicont-{v#id}" class="appbosuicont">
                <div id="appbosuilist" class="aw-bos">
                    <div class="loading">
                        <img src="/images/loading.gif" /> Загрузка...
                    </div>
                </div>
            </div>
        </li>

        <li class="divider"></li>
        <li>
            <a href="/user/logout/" data-click="user-logout">Выйти</a>
        </li>
    </ul>
</li>

<script>
    Brick.f('user', 'user', function(){

        var NS = Brick.mod.user;
        var userWidget = new NS.UserFormWidget({
            'boundingBox': '#userform-{v#id}'
        });
        userWidget.render();


        Brick.f('bos', 'label', function(){
            Brick.Permission.load(function(){
                var elList = document.getElementById('appbosuicont-{v#id}');
                new Brick.mod.bos.LabelListWidget(elList, {
                    'startupBeforeEventDisable': true,
                    'startupAfterEventDisable': true,
                    'uriPrefix': '/bos/'
                });
            });
        });

    });
</script>

[/bkvar]

[*]-->
{v#result}
